<div id="qr-reader"></div>
<input type="range" id="zoom-slider" min="1" max="10" step="0.1">

<script src="./html5-qrcode-min.js"></script>

<script>
  let html5QrCode = new Html5Qrcode("qr-reader");
  let selectedCameraId;

  // Populate camera selection dropdown
  Html5Qrcode.getCameras().then(devices => {
    if (devices.length > 0) {
        let backCamera = cameras.find(cam => cam.label.toLowerCase().includes('back')) || -1; 
      
      selectedCameraId = backCamera.id; // Select the first camera by default
    }
  }).catch(err => console.log("Camera access error: ", err));

 
  
    html5QrCode.start(
      selectedCameraId,
      { fps: 10, qrbox: 250 },
      (decodedText) => console.log(`Scanned: ${decodedText}`)
    ).catch(err => console.log("Start scan error: ", err));
  

  // Zoom slider functionality
  document.getElementById("zoom-slider").addEventListener("input", (event) => {
    const zoomValue = parseFloat(event.target.value);
    html5QrCode.applyVideoConstraints({ advanced: [{ zoom: zoomValue }] })
      .catch(err => console.log("Zoom not supported:", err));
  });
</script>
